== Hardware

Location: db0hro

* Model: Mikrotik LHG 5 ac (RBLHGG-5acD)
* WLAN MAC: 48:8F:5A:59:2E:83
* LAN MAC: 48:8F:5A:59:2E:82
* OS: RouterOS 6.48.3

Location: bauamt

* Model: Mikrotik LHG 5 ac (RBLHGG-5acD)
* WLAN MAC: 48:8F:5A:59:2E:83
* LAN MAC: 48:8F:5A:59:2E:82
* OS: RouterOS 6.48.3


== Firmware Update

After boot AP has IP 192.168.88.1 with DHCP server active.

Now we need to update the firmware.

Note: LHG device is intended for outdoor bridge. Therefore you have the following restrictions:
* no indoor channel can be configured
* normal AccessPoint mode is not possible (would need RouterOS license level 4)


=== Connect LHG to a network with internet connection for firmware update

We configure the LAN interface with static IP in our home network.

* WebFig -> IP -> DNS -> Server : insert IP of your DNS server
* WebFig -> IP -> Routes -> Routes -> Add New
  * Dst. Address: 0.0.0.0/0
  * Gateway: IP_OF_YOUR_GATEWAY
  * OK
* WebFig -> IP -> Addresses -> select *ether1*
  * Address: FREE_IP_IN_YOUR_HONE_NETWORK
  * OK

Now you lose connection to the device because it has a new IP.
Connect the LHD via cable to you home network.
You should now be able to ping FREE_IP_IN_YOUR_HONE_NETWORK.

=== Update firmware

* ssh admin@FREE_IP_IN_YOUR_HONE_NETWORK
* check whether new firmware available: /system package update check-for-updates
* if available then download: /system package update download
* reboot to make upgrade available: /system reboot
* now we should see an "upgrade firmware": /system routerboard print
* do upgrade: /system routerboard upgrade
* final reboot: /system reboot


== Configuration

=== Concept: DH0HRO <-> Bauamt

Location      DB0HRO			Bauamt
Hostname:     bridge-db0hro-bauamt	bridge-bauamt-db0hro
Password:     ...
IP:           192.168.88.1  		192.168.88.2
Default Gw:   ...
DNS:          ...
NTP:          ...
Syslog:       ...

Mode:         PTP Bridge AP		PTP Bridge CPE
SSID:         R13-bb-sued.on-i.de
Frequency:    108 ?? Wie sieht es beim Bauamt aus?
              5580 (108)
ChanWidth:    20
Country:      Germany
Installation: outdoor

=== RouterOS - LHG specific

* You can reset the configuration by pressing and hold *Reset* Button and powering on the device at the same time. Hold the button until the second LED begins to blink constantly. Then release the *Reset* Button. After 2min you should be able to connect to the device via 192.168.88.1/24.

* disable service we do not need
  * WebFig -> IP -> DHCP Server : delete the first line.
  * WebFig -> IP -> Firewall -> NAT : click on the first rule and uncheck *Enabled*. Press *OK*.
  * WebFig -> IP -> Services : disable *telnet*
* configure IP
  * WebFig -> IP -> Addresses -> select first entry and insert the new IP
  * now you need to connect (via webbrowser) to the new IP
* configure WiFi
  * device 1: ...
  * device 2: simplest way to connect to existing WiFi network is doing a scan and select the network
    * WebFig -> Wireless -> WiFi Interfaces -> select button *scanner* and press *Start*. Now you should see the wifi network of the other device. Select this entry and press *Connect*. After some second you should see the Tx/Tx counters increasing.

* Firewall: allow anything.
  * WebFig -> IP -> Firewall -> Add New
    * Chain: forward -> OK
    * Chain: input -> OK
    * Chain: output -> OK
  * Delete all rules except our new rules. Note: First rule cannot be deleted because it is a builtin rule.
* enable Bridge
  * WebFig -> Bridge -> Bridge -> Add New. Stay with default setting and press *OK*.
  * WebFig -> Bridge -> Ports -> Add New. Select as Interface *wlan1* and press *OK*.
  * WebFig -> Bridge -> Ports -> Add New. Select as Interface *ether1* and press *OK*.

* Hostname
  * WebFig -> System -> Identity : insert the hostname here
* Password
  * WebFig -> System -> Password

* DNS / NTP / Syslog ?

* HTTPS webinterface is disabled by default. To activate it you need to generate a certificate as described in https://www.medo64.com/2016/11/enabling-https-on-mikrotik/. Set correct time before creating certificates else they are already expired.
